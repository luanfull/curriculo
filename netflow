sudo add-apt-repository -y ppa:webupd8team/java
sudo apt-get update
sudo apt-get -y install oracle-java8-installer
wget -O - http://packages.elasticsearch.org/GPG-KEY-elasticsearch | sudo apt-key add -
echo 'deb https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.5.2-amd64.deb stable main' | sudo tee /etc/apt/sources.list.d/ela
sticsearch.list
sudo apt-get update
sudo apt-get -y install elasticsearch=7.5.2

# Install Kibana
cd ~; wget https://artifacts.elastic.co/downloads/kibana/kibana-7.5.2-amd64.deb
tar xvf kibana-*.tar.gz
# vi ~/kibana-7*/config/kibana.yml
# add host: "localhost"
sudo mkdir -p /opt/kibana
sudo cp -R ~/kibana-7*/* /opt/kibana/
cd /etc/init.d && sudo wget https://github.com/luanfull/curriculo/blob/gh-pages/netflow-scprit
sudo chmod +x /etc/init.d/kibana7
sudo update-rc.d kibana7 defaults 96 9
sudo service kibana7 start

# Install Nginx

sudo apt-get install nginx apache2-utils
sudo htpasswd -c /etc/nginx/htpasswd.users admin
# sudo vi /etc/nginx/sites-available/default
# server {
#    listen 80;
#
#    server_name example.com;
#
#    auth_basic "Restricted Access";
#    auth_basic_user_file /etc/nginx/htpasswd.users;
#
#    location / {
#        proxy_pass http://localhost:5601;
#        proxy_http_version 1.1;
#        proxy_set_header Upgrade $http_upgrade;
#        proxy_set_header Connection 'upgrade';
#        proxy_set_header Host $host;
#        proxy_cache_bypass $http_upgrade;        
#    }
#}

# Install Logstash
echo 'deb https://artifacts.elastic.co/downloads/logstash/logstash-7.5.2.deb stable main' | sudo tee /etc/apt/sources.list.d/logstash.list
sudo apt-get update
sudo apt-get install logstash
